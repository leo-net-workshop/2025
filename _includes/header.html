<nav id="site-nav" class="navbar navbar-fixed-top navbar-custom">
    <div class="container-fluid">
        <div class="navbar-header">
            <!-- logo -->
            <div class="site-branding">
                <a class="logo" href="index.html">{{ site.data.conference.short_title }} {{ site.data.conference.year
                    }}</a>
            </div>

            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-items"
                aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="navbar-items">
            <ul class="nav navbar-nav">
                <!-- navigation menu -->
                <li><a href="cfp.html">Call for Papers</a></li>
                <li><a href="program.html">Program</a></li>
                <li><a href="committee.html">Committees</a></li>
                <li><a href="previous_editions.html">Previous Editions</a></li>
            </ul>
        </div>
    </div><!-- /.container -->
</nav>

<!-- Full Hero Header - Only for Home Page -->
<header id="site-header" class="site-header valign-center">
    <!-- Animated Satellite Constellation -->
    <div class="satellite-constellation">
        <div class="satellite satellite-1"></div>
        <div class="satellite satellite-2"></div>
        <div class="satellite satellite-3"></div>
        <div class="satellite satellite-4"></div>
        <div class="satellite satellite-5"></div>
    </div>

    <!-- Enhanced Stars Background -->
    <div class="stars-layer" id="stars-layer"></div>

    <div class="intro">
        <h1>{{ site.data.conference.short_title }} {{ site.data.conference.year }}</h1>
        <h2>{{ site.data.conference.title }}</h2>
        <div class="hero-location-date">
            <span class="location">{{ site.data.conference.location }}</span>
            <span class="date">{{ site.data.conference.dates }}</span>
        </div>

        <!-- Orbital Countdown Timer -->
        <div class="orbital-countdown" id="orbital-countdown">
            <div class="countdown-content">
                <div class="countdown-title">ðŸš€ Mission Countdown</div>
                <div class="countdown-display" id="countdown-display">
                    <div class="countdown-unit">
                        <span class="countdown-number" id="days">--</span>
                        <span class="countdown-label">Days</span>
                    </div>
                    <div class="countdown-unit">
                        <span class="countdown-number" id="hours">--</span>
                        <span class="countdown-label">Hours</span>
                    </div>
                    <div class="countdown-unit">
                        <span class="countdown-number" id="minutes">--</span>
                        <span class="countdown-label">Minutes</span>
                    </div>
                    <div class="countdown-unit">
                        <span class="countdown-number" id="seconds">--</span>
                        <span class="countdown-label">Seconds</span>
                    </div>
                </div>
            </div>
        </div>

        <a href="https://conferences.sigcomm.org/sigcomm/{{ site.data.conference.year }}/" target="_blank"
            class="hero-subtitle">Co-located with ACM SIGCOMM {{ site.data.conference.year }}</a>
    </div>
</header>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const navbar = document.querySelector('.navbar-custom');
        const siteBranding = document.querySelector('.site-branding');
        const siteHeader = document.querySelector('#site-header');
        const navbarToggle = document.querySelector('.navbar-toggle');
        const navbarCollapse = document.querySelector('.navbar-collapse');

        // Enhanced scroll behavior for homepage
        window.addEventListener('scroll', function () {
            const scrollY = window.scrollY;
            const headerHeight = siteHeader ? siteHeader.offsetHeight : 100;

            // Show/hide navbar logo based on scroll position
            if (scrollY > headerHeight * 0.8) {
                navbar.classList.add('navbar-solid');
                if (siteBranding) {
                    siteBranding.classList.add('visible');
                }
            } else {
                navbar.classList.remove('navbar-solid');
                if (siteBranding) {
                    siteBranding.classList.remove('visible');
                }
            }
        });

        // Mobile hamburger menu functionality
        if (navbarToggle && navbarCollapse) {
            navbarToggle.addEventListener('click', function () {
                // Toggle active state on hamburger
                navbarToggle.classList.toggle('active');

                // Toggle navbar collapse
                navbarCollapse.classList.toggle('show');
                navbarCollapse.classList.toggle('in'); // For Bootstrap compatibility

                // Prevent body scroll when menu is open
                if (navbarCollapse.classList.contains('show')) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
            });

            // Close mobile menu when clicking on a nav link
            const navLinks = navbarCollapse.querySelectorAll('a');
            navLinks.forEach(link => {
                link.addEventListener('click', function () {
                    navbarToggle.classList.remove('active');
                    navbarCollapse.classList.remove('show', 'in');
                    document.body.style.overflow = '';
                });
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function (event) {
                const isClickInsideNav = navbar.contains(event.target);
                if (!isClickInsideNav && navbarCollapse.classList.contains('show')) {
                    navbarToggle.classList.remove('active');
                    navbarCollapse.classList.remove('show', 'in');
                    document.body.style.overflow = '';
                }
            });
        }

        // Enhanced responsive behavior for window resize
        let resizeTimer;
        window.addEventListener('resize', function () {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
                // Close mobile menu on desktop resize
                if (window.innerWidth > 768) {
                    if (navbarToggle) navbarToggle.classList.remove('active');
                    if (navbarCollapse) {
                        navbarCollapse.classList.remove('show', 'in');
                    }
                    document.body.style.overflow = '';
                }
            }, 100);
        });

        // Generate dynamic stars background
        function generateStars() {
            const starsLayer = document.getElementById('stars-layer');
            if (!starsLayer) return;

            const starCount = 50;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';

                // Random star size
                const starTypes = ['star-small', 'star-medium', 'star-large'];
                const randomType = starTypes[Math.floor(Math.random() * starTypes.length)];
                star.classList.add(randomType);

                // Random position
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';

                // Random animation delay
                star.style.animationDelay = Math.random() * 3 + 's';

                starsLayer.appendChild(star);
            }
        }

        // Initialize homepage stars
        generateStars();

        // Enhanced countdown timer functionality
        function updateCountdown() {
            const targetDate = new Date('2025-08-18T00:00:00').getTime();
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const daysEl = document.getElementById('days');
                const hoursEl = document.getElementById('hours');
                const minutesEl = document.getElementById('minutes');
                const secondsEl = document.getElementById('seconds');

                if (daysEl) daysEl.textContent = days.toString().padStart(2, '0');
                if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
            }
        }

        // Update countdown every second
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Add smooth scroll behavior for anchor links
        const anchorLinks = document.querySelectorAll('a[href^="#"]');
        anchorLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href === '#') return;

                const target = document.querySelector(href);
                if (target) {
                    e.preventDefault();
                    const navbarHeight = navbar.offsetHeight;
                    const targetPosition = target.offsetTop - navbarHeight - 20;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });
    });
</script>